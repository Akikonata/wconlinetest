<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name=viewport content="width=device-width,initial-scale=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
	<title>世界杯</title>
	<link href="css/style.css" rel="stylesheet" type="text/css">	
</head>
<body>
	<div  class="top_section">    	
        <div class="top_tit"><img src="images/s_t.png"></div>
        <div class="top_logo"><img src="images/top-2.png"></div>
        <div class="menu">
            <div id="navigation" class="nav-collapse page-sliderbar">
                <ul class="navbar-nav" id="menu-js">
                <li><a href="http://tieba.baidu.com/f?ie=utf-8&kw=%E4%B8%96%E7%95%8C%E6%9D%AF&fr=search" target="_blank">世界杯贴吧</a></li>
                    <li><a href="comic.html">看球攻略+</a>
                        <ul class="dropdown-menu sub-menu media-hide">
                            <li><a href="force.html"><span>百度大数据</span></a></li>                            
                        </ul>
                    </li>
                    <li><a href="perfor.html">球员表现</a></li>
                    <!-- <li><a href="wait.html">世界杯进程</a></li> -->
                    <li><a href="index.html">吧友百态+</a>
                        <ul class="dropdown-menu sub-menu media-hide">
                             <li><a href="map.html"><span>地图</span></a></li>
                             <li><a href="index.html"><span>70 80 90</span></a></li>
                             <li><a href="wait.html"><span>伪球迷</span></a></li>
                             <li><a href="wait.html"><span>帅哥球星</span></a></li>
                             <li><a href="wait.html"><span>球迷生活</span></a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div class="dropdown">
            <a href="javascript:;"id="menubadge"class="menuButton btn-navbar collapsed menuButton" data-toggle="collapse" data-target=".nav-collapse"></a>
        </div>
    </div>
    <div class="contentWrap">        
        <div class="section_box">
            <div class="con_bg">
                <div class="content">                        
                    <div class="section_l">
                        <div class="sidebar">
                            <div id="sidebar">                                    
                                <div class="select gender_box">
                                    <h3>性别</h3>
                                    <ul  class=" select gender_list">
                                        <li><a href="javascript:void(0)" id="s-men" class="icon active" value='men'></a><p>MALE</p></li>
                                        <li><a href="javascript:void(0)" id="s-women" class="icon" value='women'></a><p>FEMALE</p></li>
                                    </ul>   
                                </div>
                                <div id='legend-container'>                                        
                                    <ul id='legend'>
                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="slides_img">
                            <div id="slides">
                                <img src="images/list_1.png">
                                <img src="images/list_2.png" >
                            </div>
                        </div>
                    </div> 
                    <div class="section_r">
                        <div id="chart"></div>
                        <div class="layout_box select">
                            <a href="javascript:void(0)" id="s-force" class='icon' value='force'></a>
                            <a href="javascript:void(0)" id="s-circle" class="icon active" value='circle'></a>
                        </div>
                    </div>
                </div>
                <div class="by_logo"></div>
                <div class="explan_box">                        
                    <div class="con">
                        <div class="msg_btn">信息图详细说明>></div>
                        <div class="colse"></div>
                        <div class="msg_box">
                            <h2>信息图详细说明</h2>
                            <ul>
                                <li><span></span>图中数据来源于百度网民的真实搜索行为，本图目的在于寻找世界杯元素之间的关系，两个元素被同时检索的次数越多，代表二者之间的关系越强。</li>
                                <li><span></span>信息图有两种形式：力导向图和弦图，其中的元素代表了不同的含义：</li>
                                <li><span></span>力导向图：每种颜色表示同一类元素，每个点代表一种与世界杯相关的元素，点的大小代表该元素检索量，点与点之间的线代表二者存在关系，点与点之间的距离代表关系的强弱程度；</li>
                                <li><span></span>弦图：每种颜色表示同一类元素，每个点代表一种与世界杯相关的元素，点的大小代表该元素检索量，点与点之间的线代表二者存在关系，点与点之间线的粗细代表关系的强弱程度。</li>
                                <li><span></span>点击左侧类别，可显示出该类别所有元素及关系；点击某个元素点，可显示该元素与其他元素关系。</li>
                            </ul>
                            <p>图中数据来源于百度网民的真实搜索行为，本图目的在于寻找世界杯元素之间的关系，两个元素被同时检索的次数越多，代表二者之间的关系越强。</p>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery.js?v=1.8.3"></script>
    <script type="text/javascript" src="js/jquery.slides.min.js?v=2014"></script>
    <script type="text/javascript" src="js/index.js?v=2014"></script>
    <script>
        var hasSVG = function(){
            SVG_NS = "http://www.w3.org/2000/svg";
            return !!document.createElementNS &&
            !!document.createElementNS(SVG_NS, 'svg').createSVGRect;
        }
        var curmode = 'circle';
        var curgender = 'men';
        if (!hasSVG()){
            $("#chart").html("<img src='images/circle-men.png'/>");
            $(".select").on('click','a',function(){
                var $this = $(this);
                var val = $this.attr('value');
                $this.parents('.select').find('a').removeClass('active');
                $this.addClass('active');
                if(val==='men'||val==='women'){
                    if(curgender===val)return false;
                    curgender = val;
                } else {
                    if(curmode===val)return false;
                    curmode = val;
                }
                $("#chart").html("<img src='images/"+curmode+"-"+curgender+".png'/>");
            });
        } else {
            $.getScript("kity/kity.all.min.js",function(){
                $.getScript("dest/kitycharts.min.js",function(){
                    var paper, chart;
                    var colors = ["#7995cc","#ba93c0","#eb6d66","#6fbef6","#f5b15a","#a5cd6a","#bfd6f4",
                                  "#d5d9ce","#bdb9db","#e2b4b4","#96c1ef","#fee75a","#b4d0c8","#bbbcbf",
                                  "#cacc68","#e7b8da",'gray','red','blue'];
                    chart = new kc.ForceChart('chart',{
                        colors:colors,
                        legendTarget:'legend'}
                    );
                    var d;
                    $.ajax({
                        url: 'data/force/ForceChartFootball.json',
                        dataType: 'json',
                        success: function( data ) {
                            //d = simpleData;
                            d = data;
                            chart.getData().update(d["men"]);
                            chart.update({mode:curmode});
                        }
                    });
                    
                    $(".select").on('click','a',function(){
                        var $this = $(this);
                        var val = $this.attr('value');
                        $this.parents('.select').find('a').removeClass('active');
                        $this.addClass('active');
                        if(val==='men'||val==='women'){
                            if(curgender===val)return false;
                            curgender = val;
                            chart.getData().reset(d[val]);
                        } else {
                            if(curmode===val)return false;
                            curmode = val;
                        }
                        chart.update({mode:curmode});
                    });

                    $('#legend').on('click','li',function(e){
                        var $this = $(this);
                        $this.siblings().removeClass('on');
                        $this.addClass('on');
                        var val = $this.data("val");
                        chart.highlightBrand(val);
                    });
                    var setView = function(){
                        var paperWidth = $("#chart").width();
                        var paperHeight = $("#chart").height();
                        var paperSize = paperWidth<paperHeight?paperWidth:paperHeight;
                        var view = chart.getPaper().getViewPort();
                        view.zoom = paperSize/700;
                        chart.getPaper().setViewPort(view);
                    }
                    $(window).on("resize",function(){
                        setView();
                    });
                    setView();
                });  
            });
        }
    </script>
</body>
</html>

